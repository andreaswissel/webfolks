function aBox(e,t,n){if(n===!0)var r='<button class="btn btn-primary" id="form-confirm" onclick="aBoxRM()">Okay</button>';else var r="";var i='<div class="alertBox"><h1>'+e+"</h1>"+"<p>"+t+"</p>"+r+"</div>";$("body").append(i)}function aBoxRM(){$("body .alertBox").fadeOut(250);setTimeout(function(){$("body .alertBox").remove()},300)}function scrollTo(e){var t=$(e).offset().top;$("html, body").animate({scrollTop:t},"slow")}function ajaxFormProcess(e){var t=$(e),n=$(t).attr("refTo"),r=$(t).attr("req"),i=$(t).attr("confirmable"),s=$(t).attr("ref"),o=!0;$(".required").each(function(e,t){if($.trim($(t).val()).length===0){$(t).parent().parent().addClass("has-error");o=!1}else{$(t).parent().removeClass("error");o=!0}});console.log("ajaxFormProcess()");if(o){var u="";u=$(t).serializeArray();console.log("trying to transfer ajax data");console.log(u);$(t).fadeOut(250);$.ajax({type:"POST",url:"index.php?page="+n+"&request="+r,data:u}).done(function(e){console.log("data transferred!");if(e==="1"){console.log("no errors, going on");console.log("confirmable: "+i);if(i==="true"){console.log("form is confirmable");aBox("Erfolgreich","Das Formular wurde 端bermittelt.",!0);$("#form-confirm").click(function(){window.location.href="?page="+s})}else{aBox("Erfolgreich","Das Formular wurde 端bermittelt.",!1);if(s==="self"){console.log("referencing self");setTimeout(function(){window.location.reload()},500)}else setTimeout(function(){window.location.href="./"},500)}}else{console.log("error");aBox("Fehler","Meldung: "+e,"true");$(t).fadeIn(250)}}).fail(function(){aBox("Fehler","Das Formular konnte nicht 端bermittelt werden.");console.log("failed to transfer data. please check ajaxFormProcess() in script.js")})}else aBox("Woops.","Das hat nicht ganz gepasst. Bitte f端lle die rot markierten Felder aus.")}function toggleAnswer(e){e.preventDefault();$(".answer").fadeToggle(500);scrollTo($(".answer"));$(".answer-anchor").fadeToggle();$("#answer").focus()}$(document).ready(function(){$(".answer-anchor").on("click",function(){$(".answer").fadeIn(500);scrollTo($(".answer"));$(".answer-anchor").fadeOut()});$(".ajaxForm").on("submit",function(e){e.preventDefault();ajaxFormProcess($(this))});$(".answerbox").on("keypress",function(e){if(e.which===13&&e.shiftKey){$(this).parent().submit();e.preventDefault()}});$("body").on("keydown",function(e){e.which===82&&e.shiftKey&&toggleAnswer(e)})});